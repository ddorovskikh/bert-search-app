{"ast":null,"code":"var _jsxFileName = \"/home/dasha/docker-k8s-test/bert-search-app/src/App.tsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport Form from \"./components/Form\";\nimport { useState } from 'react';\nimport Table from './components/Table';\nimport Title from './components/Title';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [isResponse, setIsResponse] = useState(false);\n  const [response, setResponse] = useState({});\n  const [tableData, setTableData] = useState([]);\n  const [timeQuery, setTimeQuery] = useState();\n  const [idsFound, setIdsFound] = useState([]);\n  const columnData = [{\n    title: 'Id',\n    columnName: 'doc_id',\n    customStyle: 'w-1/5'\n  }, {\n    title: 'Title',\n    columnName: 'title',\n    customStyle: 'w-2/5'\n  }, {\n    title: 'Authors',\n    columnName: 'authors'\n  }, {\n    title: 'Quotes',\n    columnName: 'quotes'\n  }];\n  const sendQuery = query => {\n    return fetch('/', {\n      method: 'POST',\n      body: query\n    }).then(response => {\n      console.log(response);\n      if (response.status >= 200 && response.status < 300) {\n        setIsResponse(true);\n        return response.json();\n      }\n    }).then(data => {\n      return data;\n    });\n  };\n  /*\n  const sortObj = (obj) => {\n    return Object.keys(obj).sort().reduce(function (result, key) {\n      result[key] = obj[key];\n      return result;\n    }, {});\n  }\n  */\n  const gettingData = input => {\n    //e.preventDefault();\n    //var input = e.target.elements.keyword.value;\n    if (input) {\n      sendQuery(input).then(data => {\n        if (!data) {\n          setIsResponse(false);\n          return setTableData([]);\n        }\n        setResponse(data);\n        console.log(data.table_data);\n        console.log(data.result_docs);\n        var ids = [];\n        data.result_docs.forEach(q_info => {\n          if (q_info['id_from'].includes('21911362')) {\n            // setIdsFound([idsFound, [...q_info['doc_ids']]]);\n            //return q_info['doc_ids'];\n            // q_info['doc_ids'].forEach((id:any) => {return id});\n            ids.push(...q_info['doc_ids']);\n          }\n        });\n        console.log(ids);\n        setTableData(Object.values(data.table_data).map(item => {\n          if ('authors' in item && item.authors.length) {\n            var authors = item.authors.join(\", \");\n          } else {\n            var authors = '';\n          }\n          return {\n            doc_id: item.doc_id,\n            title: item.title,\n            authors: authors,\n            quotes: item.quotes.join(\", \")\n          };\n        }));\n        setTimeQuery(data.time * 60);\n      });\n    }\n  };\n  //console.log(idsFound)\n  //console.log(response);\n  /*\n  <div className=\"App\">\n    <header className=\"App-header\">\n      <Form changeHandler={gettingData}/>\n    </header>\n  </div>\n  */\n  //console.log(tableData)\n  /*<div className=\"flex\">\n    {timeQuery}\n  </div>*/\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mr-5 flex w-full flex-col\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"box\",\n      children: /*#__PURE__*/_jsxDEV(Title, {\n        title: 'Semantic search demo',\n        size: \"large\",\n        topOffset: \"mt-6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"box\",\n      children: /*#__PURE__*/_jsxDEV(Form, {\n        changeHandler: gettingData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this), isResponse && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `mt-6 mb-6 flex flex-1 flex-col rounded bg-white px-7 pt-7 pb-8 shadow-card dark:border dark:border-neutral-600 dark:bg-neutral-900`,\n        children: /*#__PURE__*/_jsxDEV(Table, {\n          columnData: columnData,\n          tableData: tableData\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 11\n      }, this)\n    }, void 0, false)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"+f7pgc7zPKldzcDn8QlD1r5PsUM=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","Form","useState","Table","Title","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","isResponse","setIsResponse","response","setResponse","tableData","setTableData","timeQuery","setTimeQuery","idsFound","setIdsFound","columnData","title","columnName","customStyle","sendQuery","query","fetch","method","body","then","console","log","status","json","data","gettingData","input","table_data","result_docs","ids","forEach","q_info","includes","push","Object","values","map","item","authors","length","join","doc_id","quotes","time","className","children","size","topOffset","fileName","_jsxFileName","lineNumber","columnNumber","changeHandler","_c","$RefreshReg$"],"sources":["/home/dasha/docker-k8s-test/bert-search-app/src/App.tsx"],"sourcesContent":["import React from 'react';\nimport Form from \"./components/Form\";\nimport { useState, useEffect } from 'react';\nimport Table from './components/Table';\nimport Title from './components/Title';\n\nfunction App() {\n  const [isResponse, setIsResponse] = useState(false);\n  const [response, setResponse] = useState({});\n  const [tableData, setTableData] = useState<any>([]);\n  const [timeQuery, setTimeQuery] = useState<number>();\n  const [idsFound, setIdsFound] = useState<any>([]);\n\n  const columnData: any[] = [\n    { title: 'Id', columnName: 'doc_id', customStyle: 'w-1/5' },\n    { title: 'Title', columnName: 'title', customStyle: 'w-2/5' },\n    { title: 'Authors', columnName: 'authors' },\n    { title: 'Quotes', columnName: 'quotes' },\n  ];\n\n  const sendQuery = (query: string) => {\n    return fetch('/', {\n       method: 'POST',\n       body: query,\n     }).then((response: any) => {\n          console.log(response);\n          if (response.status >= 200 && response.status < 300) {\n            setIsResponse(true);\n            return response.json();\n          }\n        })\n        .then( (data: any) =>  { return data });\n  }\n  /*\n  const sortObj = (obj) => {\n    return Object.keys(obj).sort().reduce(function (result, key) {\n      result[key] = obj[key];\n      return result;\n    }, {});\n  }\n  */\n  const gettingData = (input: string) => {\n    //e.preventDefault();\n    //var input = e.target.elements.keyword.value;\n    if (input){\n      sendQuery(input).then((data: any) => {\n        if (!data) {\n          setIsResponse(false);\n          return setTableData([]);\n        }\n        setResponse(data);\n        console.log(data.table_data)\n        console.log(data.result_docs)\n        var ids:any = [];\n        data.result_docs.forEach((q_info: any) => {\n          if (q_info['id_from'].includes('21911362')){\n            // setIdsFound([idsFound, [...q_info['doc_ids']]]);\n            //return q_info['doc_ids'];\n            // q_info['doc_ids'].forEach((id:any) => {return id});\n            ids.push(...q_info['doc_ids']);\n          }\n        });\n        console.log(ids);\n        setTableData(Object.values(data.table_data).map((item: any) => {\n          if ('authors' in item && item.authors.length) {\n            var authors: string = item.authors.join(\", \")\n          }\n          else {\n            var authors: string = ''\n          }\n          return {\n            doc_id: item.doc_id,\n            title: item.title,\n            authors: authors,\n            quotes: item.quotes.join(\", \")\n          }\n        }));\n        setTimeQuery(data.time * 60);\n      });\n    }\n  }\n  //console.log(idsFound)\n  //console.log(response);\n  /*\n  <div className=\"App\">\n    <header className=\"App-header\">\n      <Form changeHandler={gettingData}/>\n    </header>\n  </div>\n  */\n  //console.log(tableData)\n  /*<div className=\"flex\">\n    {timeQuery}\n  </div>*/\n  return (\n\n    <div className=\"mr-5 flex w-full flex-col\">\n      <div className=\"box\">\n        <Title title={'Semantic search demo'} size=\"large\" topOffset=\"mt-6\" />\n      </div>\n      <div className=\"box\">\n        <Form changeHandler={gettingData}/>\n      </div>\n      {isResponse && (\n        <>\n          <div\n            className={`mt-6 mb-6 flex flex-1 flex-col rounded bg-white px-7 pt-7 pb-8 shadow-card dark:border dark:border-neutral-600 dark:bg-neutral-900`}\n          >\n            <Table\n              columnData={columnData}\n              tableData={tableData}\n            />\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}